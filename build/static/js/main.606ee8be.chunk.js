(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{167:function(e,t,n){e.exports=n(319)},180:function(e,t){},182:function(e,t){},196:function(e,t){},198:function(e,t){},226:function(e,t){},228:function(e,t){},229:function(e,t){},234:function(e,t){},236:function(e,t){},242:function(e,t){},244:function(e,t){},263:function(e,t){},275:function(e,t){},278:function(e,t){},309:function(e,t){},318:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),o=n.n(c),l=(n(172),n(47)),u=n.n(l),i=n(95),s=n(9),m=n(63),f=n.n(m),p=n(160),d=n.n(p),E=n(161),h=n.n(E),g=n(96),b=n.n(g);h.a.config();var v="https://auth-server-401.herokuapp.com",y=r.a.createContext(),j=function(e){var t=Object(a.useState)({}),n=Object(s.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),m=Object(s.a)(l,2),p=m[0],E=m[1];function h(e){try{var t=d.a.decode(e);t&&g(!0,e,t)}catch(n){g(!1,null,{}),console.log("Token Validation Error ".concat(n.message))}}function g(e,t,n){f.a.save("auth",t),o({user:n}),E(e)}function j(){return(j=Object(i.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat(v,"/signin")).set("authorization","Basic ".concat(btoa("".concat(t,":").concat(n))));case 3:h(e.sent.body.token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Signin Error",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(){return(O=Object(i.a)(u.a.mark((function e(t,n,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat(v,"/signup"),{email:t,username:n,password:a,role:r});case 3:h(e.sent.body.token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Signup Error",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(a.useEffect)((function(){h(f.a.load("auth"))}),[]);var x={user:c,setUser:o,loggedIn:p,setLoggedIn:E,login:function(e,t){return j.apply(this,arguments)},signup:function(e,t,n,a){return O.apply(this,arguments)},logout:function(){!function(e,t){f.a.save("auth",null),o({user:t}),E(e)}(!1,{})}};return r.a.createElement(y.Provider,{value:x},e.children)},O=n(16),x=n(330),C=n(326),S=n(321),k=n(97),w=function(e){var t=Object(a.useState)({}),n=Object(s.a)(t,2),r=n[0],c=n[1];return[r,function(e){c(Object(k.a)(Object(k.a)({},r),{},Object(O.a)({},e.target.name,e.target.value)))},function(t){t.preventDefault(),t.target.reset(),e.handleSubmit(r);c({items:{}})}]};var I=function(e){var t,n=w(e),a=Object(s.a)(n,3),c=(a[0],a[1]),o=a[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{bg:"light",key:"6",text:"dark",style:{width:"100%"},className:"mb-2"},r.a.createElement(x.a.Header,{style:{"text-align":"center"}},"Add Item"),r.a.createElement(x.a.Body,null,r.a.createElement(C.a,{onSubmit:o},r.a.createElement(C.a.Group,{controlId:"exampleForm.ControlInput1"},r.a.createElement(C.a.Label,null,"To Do Item"),r.a.createElement(C.a.Control,{type:"text",placeholder:"Add To Do List Item",name:"text",onChange:c})),r.a.createElement(C.a.Group,{controlId:"formBasicRange"},r.a.createElement(C.a.Label,null,"Difficulty Rating"),r.a.createElement(C.a.Control,(t={type:"range",defaultValue:"1"},Object(O.a)(t,"type","range"),Object(O.a)(t,"min","1"),Object(O.a)(t,"max","5"),Object(O.a)(t,"name","difficulty"),Object(O.a)(t,"onChange",c),t))),r.a.createElement(C.a.Group,{controlId:"exampleForm.ControlSelect2"},r.a.createElement(C.a.Label,null,"Assigned To"),r.a.createElement(C.a.Control,{type:"text",placeholder:"Assigned To",onChange:c,name:"assignee"})),r.a.createElement(S.a,{variant:"primary",type:"submit"},"Add Item")," "))))},D=n(328),T=n(322),L=n(11);var N=function(e){return r.a.createElement(r.a.Fragment,null,e.list.map((function(t){return r.a.createElement(D.a,{style:{width:"100%",height:"auto",display:"flex",flexDirection:"column"},onClose:function(){return e.handleDelete(t._id)}},r.a.createElement(D.a.Header,{style:{justifyContent:"space-between"}},r.a.createElement(L.b,{condition:!1===t.complete},r.a.createElement(L.c,null,r.a.createElement(T.a,{onClick:function(){return e.handleComplete(t._id)},pill:!0,variant:"success"},r.a.createElement("strong",{className:"mr-auto"}," pending")),"     "),r.a.createElement(L.a,null,r.a.createElement(T.a,{onClick:function(){return e.handleComplete(t._id)},pill:!0,variant:"danger"},r.a.createElement("strong",{className:"mr-auto"}," complete ")),"      ")),t.assignee),r.a.createElement(D.a.Body,null,t.text,r.a.createElement("br",null),r.a.createElement("small",{className:"mr-auto",style:{float:"right"}}," Difficulty: ",t.difficulty)))})))},_=n(323),A=n(324),B=n(162),F=n(325),U=n(166),H=function(e){var t="https://api-js401.herokuapp.com/api/v1/todo",n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],o=r[1],l=Object(a.useContext)(y),u=function(){fetch(t,{method:"get",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return o(e.results)})).catch(console.error)};return[c,function(e){"admin"!==l.user.user.type&&"editor"!==l.user.user.type||(e.due=new Date,fetch(t,{method:"post",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){o([].concat(Object(U.a)(c),[e]))})).catch(console.error))},function(e){if("admin"===l.user.user.type||"editor"===l.user.user.type){var n=c.filter((function(t){return t._id===e}))[0]||{};if(n._id){n.complete=!n.complete;var a="".concat(t,"/").concat(e);fetch(a,{method:"put",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){o(c.map((function(t){return t._id===n._id?e:t})))})).catch(console.error)}}},u,function(e){if("admin"===l.user.user.type&&(c.filter((function(t){return t._id===e}))[0]||{})._id){var n="".concat(t,"/").concat(e);fetch(n,{method:"delete",mode:"cors"}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=c.filter((function(t){return t!==e}));o(t),u()})).catch(console.error)}}]};n(318);var J=function(e){var t=H(e),n=Object(s.a)(t,5),c=n[0],o=n[1],l=n[2],u=n[3],i=n[4];return Object(a.useEffect)(u,[]),Object(a.useEffect)((function(){document.title="To-do List "+c.filter((function(e){return!e.complete})).length+" Completed/ "+c.filter((function(e){return e.complete})).length+" Incompleted"})),r.a.createElement(_.a,{fluid:"md"},r.a.createElement("br",null),r.a.createElement(A.a,{xs:7},r.a.createElement(B.a,null,r.a.createElement(F.a,{key:"0",variant:"primary"},r.a.createElement(F.a.Heading,{style:{"text-align":"center"}},"There are ",c.filter((function(e){return!e.complete})).length," Items To Complete")))),r.a.createElement("section",{className:"todo"},r.a.createElement(A.a,null,r.a.createElement(B.a,{xs:5},r.a.createElement(I,{handleSubmit:o})),r.a.createElement(B.a,null,r.a.createElement(N,{list:c,handleComplete:l,handleDelete:i})))))},G=n(329),R=n(327),V=function(){var e=Object(a.useContext)(y),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),i=u[0],m=u[1];return r.a.createElement(L.b,{condition:e.loggedIn},r.a.createElement(L.c,null,r.a.createElement("button",{onClick:e.logout},"Log Out")),r.a.createElement(L.a,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.login(c,i)}},r.a.createElement("input",{type:"text",name:"username",placeholder:"Enter Username",onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:function(e){m(e.target.value)}}),r.a.createElement("button",null,"Login"))))},z=function(){var e=Object(a.useContext)(y),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),i=u[0],m=u[1],f=Object(a.useState)("user"),p=Object(s.a)(f,2),d=p[0],E=p[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.signup(c,i,d)}},r.a.createElement("input",{type:"text",name:"username",placeholder:"Enter Username",onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:function(e){m(e.target.value)}}),r.a.createElement("select",{name:"roles",id:"roles",onChange:function(e){E(e.target.value)}},r.a.createElement("option",{value:"user"},"User"),r.a.createElement("option",{value:"editor"},"Editor"),r.a.createElement("option",{value:"admin"},"Admin")),r.a.createElement("button",null,"SignUp"))};var P=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{bg:"primary",variant:"dark"},r.a.createElement(G.a.Brand,{href:"#home"}),r.a.createElement(R.a,{className:"mr-auto"},r.a.createElement(R.a.Link,{href:"#home"},"Home")),r.a.createElement(z,null),r.a.createElement(V,null)))},Z=function(e){var t=Object(a.useContext)(y),n=!1;try{n=!(!t.loggedIn||!e.capability)&&t.user.user.capabilities.includes(e.capability)}catch(c){console.log("NOT AUTHORIZED",c.message)}return r.a.createElement(L.b,{condition:n},e.children)},q=function(e){return r.a.createElement(Z,{capability:"update"},r.a.createElement("span",null,"Edit"))},K=function(e){return r.a.createElement(Z,{capability:"delete"},r.a.createElement("span",null,"Delete"))};var M=function(){var e=Object(a.useContext)(y);return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement(L.b,{condition:e.loggedIn},r.a.createElement(L.c,null,r.a.createElement(J,null)),r.a.createElement(L.a,null,r.a.createElement("div",null))),r.a.createElement(q,null),r.a.createElement(K,null))};function Q(){return r.a.createElement(M,null)}var W=document.getElementById("root");o.a.render(r.a.createElement(j,null,r.a.createElement(Q,null)),W)}},[[167,1,2]]]);
//# sourceMappingURL=main.606ee8be.chunk.js.map