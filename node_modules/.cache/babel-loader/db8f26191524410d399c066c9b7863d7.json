{"ast":null,"code":"import _toConsumableArray from\"/home/boshra/401labs/hooks/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/boshra/401labs/hooks/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';var useAjax=function useAjax(props){var todoAPI=\"https://api-js401.herokuapp.com/api/v1/todo\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _addItem=function _addItem(item){item.due=new Date();fetch(todoAPI,{method:\"post\",mode:\"cors\",cache:\"no-cache\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(item)}).then(function(response){return response.json();}).then(function(savedItem){setList([].concat(_toConsumableArray(list),[savedItem]));}).catch(console.error);};var _toggleComplete=function _toggleComplete(id){var item=list.filter(function(i){return i._id===id;})[0]||{};if(item._id){item.complete=!item.complete;var url=\"\".concat(todoAPI,\"/\").concat(id);fetch(url,{method:\"put\",mode:\"cors\",cache:\"no-cache\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(item)}).then(function(response){return response.json();}).then(function(savedItem){setList(list.map(function(listItem){return listItem._id===item._id?savedItem:listItem;}));}).catch(console.error);}};var _getTodoItems=function _getTodoItems(){fetch(todoAPI,{method:\"get\",mode:\"cors\"}).then(function(data){return data.json();}).then(function(data){return setList(data.results);}).catch(console.error);};var _deleteTask=function _deleteTask(id){var item=list.filter(function(i){return i._id===id;})[0]||{};if(item._id){var url=\"\".concat(todoAPI,\"/\").concat(id);fetch(url,{method:'delete',mode:'cors'}).then(function(data){return data.json();}).then(function(data){console.log(data);var newList=list.filter(function(item){return item!==data;});setList(newList);_getTodoItems();}).catch(console.error);}};return[list,_addItem,_toggleComplete,_getTodoItems,_deleteTask];};export default useAjax;","map":{"version":3,"sources":["/home/boshra/401labs/hooks/todo/src/customHooks/Ajax.js"],"names":["useState","useAjax","props","todoAPI","list","setList","_addItem","item","due","Date","fetch","method","mode","cache","headers","body","JSON","stringify","then","response","json","savedItem","catch","console","error","_toggleComplete","id","filter","i","_id","complete","url","map","listItem","_getTodoItems","data","results","_deleteTask","log","newList"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nconst useAjax = (props) => {\n    const todoAPI = \"https://api-js401.herokuapp.com/api/v1/todo\";\n  const [list, setList] = useState([]);\n  const _addItem = (item) => {\n    item.due = new Date();\n    fetch(todoAPI, {\n      method: \"post\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(item),\n    })\n      .then((response) => response.json())\n      .then((savedItem) => {\n        setList([...list, savedItem]);\n      })\n      .catch(console.error);\n  };\n  \n  const _toggleComplete = (id) => {\n    let item = list.filter((i) => i._id === id)[0] || {};\n\n    if (item._id) {\n      item.complete = !item.complete;\n\n      let url = `${todoAPI}/${id}`;\n\n      fetch(url, {\n        method: \"put\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(item),\n      })\n        .then((response) => response.json())\n        .then((savedItem) => {\n          setList(\n            list.map((listItem) =>\n              listItem._id === item._id ? savedItem : listItem\n            )\n          );\n        })\n        .catch(console.error);\n    }\n  };\n\n  const _getTodoItems = () => {\n    fetch(todoAPI, {\n      method: \"get\",\n      mode: \"cors\",\n    })\n      .then((data) => data.json())\n      .then((data) => setList(data.results))\n      .catch(console.error);\n  };\n\n  const _deleteTask =  (id)=>{\n    let item = list.filter((i) => i._id === id)[0] || {};\n    if (item._id) {\n      let url = `${todoAPI}/${id}`;\n      fetch(url, {\n        method: 'delete',\n        mode: 'cors',\n      }).then((data) => data.json())\n      .then((data) =>{\n        console.log(data);\n        const newList = list.filter(item => item !== data)\n\n        setList(newList)\n        _getTodoItems()\n      })\n      .catch(console.error);\n    }\n}\n\n  return [list, _addItem, _toggleComplete, _getTodoItems, _deleteTask ];\n};\n\nexport default useAjax;"]},"metadata":{},"sourceType":"module"}